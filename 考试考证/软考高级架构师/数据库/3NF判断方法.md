**1NF、2NF 和 3NF** 是数据库设计中的三种范式，用于减少数据冗余、避免数据异常和提高数据一致性。每个范式都有其具体的要求，下面分别介绍如何判断一个关系是否符合 **第一范式（1NF）**、**第二范式（2NF）** 和 **第三范式（3NF）**。

------

### **1. 第一范式（1NF）**

**第一范式**要求关系中的每一个属性都必须是原子的，即属性值不可再分。换句话说，每个字段只能包含单一的值，不可以是集合、列表或嵌套结构。

#### **1NF 判断方法**：

- **每个属性值必须是原子性的**：即每个字段中的值必须是不可再分的基本数据项。
- **没有重复的字段**：表中的每一列都必须包含唯一的属性。

#### **举例**：

假设有如下表：

| 学生ID | 学生姓名 | 课程       |
| ------ | -------- | ---------- |
| 1      | 张三     | 数学, 英语 |
| 2      | 李四     | 物理, 化学 |

这个表不满足 1NF，因为 `课程` 字段包含了多个值，违反了原子性要求。要满足 1NF，需要将多值字段拆分：

| 学生ID | 学生姓名 | 课程 |
| ------ | -------- | ---- |
| 1      | 张三     | 数学 |
| 1      | 张三     | 英语 |
| 2      | 李四     | 物理 |
| 2      | 李四     | 化学 |

------

### **2. 第二范式（2NF）**

**第二范式**建立在 1NF 的基础上，要求关系满足 1NF，并且每个非主属性必须完全依赖于候选键，而不能是部分依赖。

#### **2NF 判断方法**：

1. **首先，表必须满足 1NF**。
2. **没有部分依赖**：即表中的每个非主属性必须完全依赖于候选键的全部，而不能仅依赖于候选键的一部分。如果表的候选键是复合键（由多个属性组成），那么每个非主属性必须依赖于复合键的所有属性，而不是依赖于复合键中的一部分。

#### **举例**：

假设有如下表：

| 学生ID | 课程ID | 学生姓名 | 课程名称 |
| ------ | ------ | -------- | -------- |
| 1      | 101    | 张三     | 数学     |
| 1      | 102    | 张三     | 英语     |
| 2      | 101    | 李四     | 数学     |

这个表已经是 1NF，但它不满足 2NF，因为 `学生姓名` 仅依赖于 `学生ID`，而不是依赖于复合主键（`学生ID, 课程ID`）。这种依赖叫做 **部分依赖**。

为了满足 2NF，可以将表分解为两个表：

1. `学生` 表：存储 `学生ID` 和 `学生姓名`。
2. `学生课程` 表：存储 `学生ID`、`课程ID` 和 `课程名称`。

------

### **3. 第三范式（3NF）**

**第三范式**在 2NF 的基础上进一步要求，关系中的每个非主属性必须直接依赖于候选键，不能依赖于其他非主属性（即不能存在传递依赖）。

#### **3NF 判断方法**：

1. **首先，表必须满足 2NF**。
2. **没有传递依赖**：即任何非主属性都不能依赖于其他非主属性。换句话说，如果 `A -> B` 且 `B -> C`，那么如果 `A` 是候选键，`C` 必须直接依赖于 `A`，而不能依赖于 `B`。

#### **举例**：

假设有如下表：

| 学生ID | 学生姓名 | 课程ID | 课程名称 | 授课教师 |
| ------ | -------- | ------ | -------- | -------- |
| 1      | 张三     | 101    | 数学     | 王老师   |
| 1      | 张三     | 102    | 英语     | 李老师   |
| 2      | 李四     | 101    | 数学     | 王老师   |

这个表已经是 2NF，但它不满足 3NF，因为 `授课教师` 依赖于 `课程ID`，而 `课程ID` 又依赖于候选键 `学生ID, 课程ID`。因此，存在 **传递依赖**：`学生ID, 课程ID -> 课程ID -> 授课教师`。

为了满足 3NF，可以将表分解为三个表：

1. `学生` 表：存储 `学生ID` 和 `学生姓名`。
2. `课程` 表：存储 `课程ID` 和 `课程名称`。
3. `授课教师` 表：存储 `课程ID` 和 `授课教师`。

------

### **总结**：

1. **1NF（第一范式）**：要求属性值原子化，没有重复的字段。
2. **2NF（第二范式）**：要求满足 1NF，并且消除部分依赖，所有非主属性必须完全依赖于候选键。
3. **3NF（第三范式）**：要求满足 2NF，并且消除传递依赖，非主属性必须直接依赖于候选键。

### **如何判断并满足这些范式**：

- 1NF：确保没有多值属性，每个属性只有一个值。
- 2NF：确保没有部分依赖，即每个非主属性必须完全依赖于候选键。
- 3NF：确保没有传递依赖，即每个非主属性必须直接依赖于候选键，而不是依赖于其他非主属性。

通过逐步分解表并消除部分依赖和传递依赖，可以将表设计到更高的范式，从而提高数据一致性、减少冗余和避免数据异常。

**2NF（第二范式）\**和\**3NF（第三范式）\**的主要区别在于对\**部分函数依赖**和**传递函数依赖**的处理方式。下面是详细的对比：

------

## **1. 2NF（第二范式）**

**定义**：在**1NF（第一范式）\**的基础上，如果\**所有非主属性**（非候选键的属性）**完全依赖于每一个候选键，而不存在部分依赖**，那么该关系满足**2NF**。

### **核心问题：消除部分依赖**

- **部分依赖**：指某些非主属性只依赖于**候选键的一部分**，而不是整个候选键。
- **适用于有复合主键（即主键由多个属性组成）的情况**。

### **举例**

考虑一个关系模式：

学生选课(学号,课程号,课程名称,学生姓名)学生选课(学号, 课程号, 课程名称, 学生姓名)

其中：

- **主键** = (学号,课程号)(学号, 课程号) （联合主键）
- **非主属性** = 课程名称,学生姓名课程名称, 学生姓名

这里存在部分依赖：

- **课程名称** 只依赖于 **课程号**，但课程号只是主键的一部分。
- **学生姓名** 只依赖于 **学号**，但学号也是主键的一部分。

**消除方法**：拆分为两个关系：

1. 课程表（课程号, 课程名称）
2. 学生选课表（学号, 课程号, 学生姓名）

这样，每个非主属性都完全依赖于候选键，符合**2NF**。

------

## **2. 3NF（第三范式）**

**定义**：在**2NF**的基础上，如果**所有非主属性都仅依赖于候选键，而不依赖于其他非主属性**（即消除**传递依赖**），那么该关系满足**3NF**。

### **核心问题：消除传递依赖**

- **传递依赖**：如果存在 **A → B**，且 **B → C**，则 **A → C** 是一种传递依赖。
- 3NF 要求 **所有非主属性必须直接依赖于候选键，而不能通过其他非主属性间接依赖**。

### **举例**

考虑一个关系模式：

学生信息(学号,学生姓名,学院,院长)学生信息(学号, 学生姓名, 学院, 院长)

其中：

- **主键** = 学号学号
- **非主属性** = 学生姓名,学院,院长学生姓名, 学院, 院长

存在**传递依赖**：

- **学号 → 学院**（一个学号对应一个学院）
- **学院 → 院长**（一个学院对应一个院长）
- **所以，学号 → 院长 是传递依赖**，违反了 3NF。

**消除方法**：拆分为两个关系：

1. 学生表（学号, 学生姓名, 学院）
2. 学院表（学院, 院长）

这样，所有非主属性都只直接依赖于候选键，符合**3NF**。

------

## **3. 2NF 与 3NF 的核心区别**

| **对比项**     | **2NF（第二范式）**                            | **3NF（第三范式）**                |
| -------------- | ---------------------------------------------- | ---------------------------------- |
| **处理的问题** | 消除**部分依赖**                               | 消除**传递依赖**                   |
| **依赖关系**   | 非主属性必须**完全依赖于候选键**               | 非主属性只能**直接依赖于候选键**   |
| **适用场景**   | 主要用于复合主键的情况                         | 适用于所有情况                     |
| **示例问题**   | 课程名称依赖于课程号，而课程号只是主键的一部分 | 院长依赖于学院，而学院又依赖于学号 |

### **总结**

- **2NF 解决部分依赖问题**，确保所有非主属性都完全依赖于候选键。
- **3NF 解决传递依赖问题**，确保所有非主属性都直接依赖于候选键，而不是通过其他非主属性间接依赖。
- **如果一个关系满足 3NF，那么它一定满足 2NF**，但**满足 2NF 不一定满足 3NF**。

你现在是在做数据库设计相关的研究吗？还是在准备讲解这部分内容？