# ElasticSearch初识



随着业务场景越来越复杂，传统的Mysql难以满足业务的需求，因此有了ElasticSearch，这种典型搜索引擎。

## 1、初识ElasticSearch

数据可视化：Kibana

存储、计算、搜索数据：ElasticSearch  底层实现是lucense

数据抓取：Logstash、Beats

lucense是java语言的搜索引擎类库，是apache的公司的顶级项目

优势：易扩展、高性能

缺点：只限于Java语言开发、学习曲线陡峭、不利于水平扩展

## 2、正向索引与倒排索引

正向索引：一句一句查询找到包含想要查询数据的数据行，典型的是Mysql

倒排索引：

有两个概念

- 文档（document）：每一条数据就是一个文档
- 词条（term）：文档按照语义分为词语

先将文档中的内容分成词条，例如 "小米手机"，“小米充电器”，这是两个数据，id分别为1，2，那么在ElasticSearch中存储的方式就是

| 词条(term) | 文档id |
| ---------- | ------ |
| 小米       | 1，2   |
| 手机       | 1      |
| 充电器     | 2      |

这种就是倒排索引的存储方式

其中词条是唯一的，如果有某个id的数据包含这个词条，就将词条的文档id加进去。

当搜素的时候先将搜索的数据进行分词，然后查找词条所在文档的id，根据文档id查找文档，最后得到真实的数据

这种返回来搜索得到文档的方式被称为倒排索引。

## 3、基本概念

索引（index）：相同文档类型的集合--》表Table

映射（mapping）：索引中文档的字段约束信息--》表结构Schema

文档（Document）：一条条的数据--》Row

字段（Field）：JSON文档中的字段--》列（Column）

DLS：elasticsearch提供的请求语句，实现CRUD --》SQL

## 4、是不是有了ES就可以替代Mysql

并不是这样的！Mysql擅长事务性操作，可以保证数据的安全性和一致性。

ES更擅长海量数据的搜索、分析与计算。

两个是互补性的。

在使用的架构中，可以用Mysql进行写、ES进行读，需要将Mysql同步到ES。



